# TCP async socket server for write

В моей работе часто встают задачи обмена данными между сайтами или сервисами.
Например обновление базы данных Фиас на сайте. Эти задачи обычно работают часами, 
а иногда и днями и очень важно контролировать текущее состояние процесса. 
Проблему эту решают по разному, например запись лога в какойто лог файл.
Решил я попробовать решить эту проблему через создание сокет сервера, 
подключившись к которому можно получить информацию о текущем состоянии выполнения задачи, 
так сказать realtime. 
Сам обработчик выполняющий какую то задачу - это посути консольная утилита написанная 
на PHP, и этот же обработчик будет создавать сокет сервер и раздавать
 информацию всем сокетам подключившиеся к ниму.
  
 ## Пример
 ```bash
    include 'AsyncSocketWriterServer.php';
    
    //Создает сервер доступным по localhost:8083
    $socketServer = new AsyncSocketServer('localhost', 8083);
    
    $i = 0;
    //Какая то долгая, полезная работа 
    while (1) {
        //Проверяет новых клиентов ожидающих подключение
        $socketServer->tick();
        
        // Отправляет всем клиентам секстовое сообщение
        $socketServer->write("Текущая итерация: " . $i . "\n");
                
        $i++;
        sleep(1);
    }
    //Закрывает все соединения и гасит сервер.
    $socketServer->stopServer();
 ```
 Теперь подключившись по tcp на localhost по 8083 порту можно получать сообщения 
 отправленные  методом write. Можно подключиьтся netcat -ом или написать простой 
 js на веб страничке который бдует вызавать информацию в realtime режиме